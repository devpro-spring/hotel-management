<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{starter::head('Thông tin khách hàng')}">
<meta charset="utf-8">
</head>
<body>
	<div class="super_container">
		<div th:replace="~{starter::header}"></div>
		<div th:replace="~{starter::header_content}"></div>
		<div class="container" style="margin-top: 350px; margin-bottom: 50px">

			<div class="row">
				<div class="col-md-12">
					<table id="datatable" class="table table-striped table-bordered">
						<thead>
							<tr>
								<th style="text-align: center">Stt</th>
								<th class="hidden" style="text-align: center">ID</th>
								<th style="text-align: center">Họ tên</th>
								<th style="text-align: center">Ngày sinh</th>
								<th style="text-align: center">CMT/CCCD</th>
								<th style="text-align: center">Số điện thoại</th>
								<th style="text-align: center">Hộ chiếu</th>
								<th style="text-align: center">Địa chỉ</th>
								<th style="text-align: center">Quốc tịch</th>
								<th style="text-align: center">Vip</th>
								<th style="text-align: center">Edit</th>
							</tr>
						</thead>

						<tfoot>
							<tr>
								<th style="text-align: center">Stt</th>
								<th class="hidden" style="text-align: center">ID</th>
								<th style="text-align: center">Họ tên</th>
								<th style="text-align: center">Ngày sinh</th>
								<th style="text-align: center">CMT/CCCD</th>
								<th style="text-align: center">Số điện thoại</th>
								<th style="text-align: center">Hộ chiếu</th>
								<th style="text-align: center">Địa chỉ</th>
								<th style="text-align: center">Quốc tịch</th>
								<th style="text-align: center">Vip</th>
								<th style="text-align: center">Edit</th>
							</tr>
						</tfoot>
						<tbody>
							<th:block th:each="guest,item:${guests}">
								<tr>
									<td style="text-align: center" th:utext="${item.count}"></td>
									<td class="hidden" th:utext="${guest.guestId}"></td>
									<td th:utext="${guest.guestName}"></td>
									<td th:utext="${guest.birth}"></td>
									<td th:utext="${guest.address}"></td>
									<td th:utext="${guest.phoneNumber}"></td>
									<td th:utext="${guest.idCard}"></td>
									<td th:utext="${guest.passport}"></td>
									<td th:utext="${guest.nationality}"></td>
									<td style="text-align: center" th:utext="${guest.isVip}"></td>
									<td style="text-align: center"><a
										th:href="@{/findOne/(id=${guest.guestId})}"
										class="btn btn-primary text-white eBtn"><span
											class="glyphicon glyphicon-pencil"></span></a></td>
								</tr>
							</th:block>
						</tbody>
					</table>

				</div>
				<div class="modal fade" id="exampleModalCenter" tabindex="-1"
					role="dialog" aria-labelledby="exampleModalCenterTitle"
					aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document"
						style="margin-top: 200px">
						<div class="modal-content">
							<form method="get" th:action="@{/update-guest-info}">
								<div class="modal-header">
									<h5 class="modal-title" style="font-weight: bold;">Sửa thông tin khách</h5>
									<button type="button" class="close" data-dismiss="modal"
										aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									
									<div class="form-group col-md-6">
										<input type="text" class="form-control" placeholder="ID..."
											required id="id" name="id">
									</div>
									<div class="form-group col-md-6">
										<label for="name" class="title-input">Họ tên</label> <input
											type="text" class="form-control" placeholder="Họ tên..."
											required id="name" name="name">
									</div>
									<div class="form-group col-md-6">
										<label for="card" class="title-input">Căn cước </label> <input
											type="text" class="form-control" placeholder="Số căn cước..."
											required id="card" name="card">
									</div>
									<div class="form-group col-md-6">
										<label for="birth" class="title-input">Ngày sinh</label> <input
											type="date" class="form-control" placeholder="Ngày sinh..."
											id="birth" name="birth">
									</div>
									<div class="form-group col-md-6">
										<label for="address" class="title-input">CMT/CCCD</label> <input
											type="text" class="form-control" placeholder="CMT/CCCD..."
											id="idCard" name="idCard">
									</div>
									<div class="form-group col-md-6">
										<label for="address" class="title-input">Hộ chiếu</label> <input
											type="text" class="form-control" placeholder="CMT/CCCD..."
											id="passport" name="passport">
									</div>
									<div class="form-group col-md-6">
										<label for="address" class="title-input">Địa chỉ</label> <input
											type="text" class="form-control" placeholder="Địa chỉ..."
											id="address" name="address">
									</div>
									<div class="form-group col-md-6">
										<label for="nationality" class="title-input">Quốc tịch</label>
										<input type="text" class="form-control"
											placeholder="Quốc tịch..." id="nationality"
											name="nationality">
									</div>
									<div class="form-group col-md-6">
										<label for="phone" class="title-input">Số điện thoại</label> <input
											type="tel" class="form-control"
											placeholder="Số điện thoại..." id="phone" name="phone">
									</div>
									<div class="form-group col-md-6" style="margin-top: 30px">
										<div class="form-check">
											<input class="form-check-input" type="checkbox" required
												id="checkVip"> <label style="margin-left: 20px"
												class="form-check-label" for="checkVip">Khách hàng VIP</label>
										</div>
									</div>
								</div>
								<div class="modal-footer" style="width: 100%">
									<button type="submit" class="btn btn-primary">Lưu</button>
									<button type="button" class="btn btn-secondary"
										data-dismiss="modal">Đóng</button>
								</div>
							</form>
						</div>
					</div>
				</div>

			</div>
		</div>
		<div th:replace="~{starter::footer}"></div>
		<div th:replace="~{starter::script}"></div>
	</div>
	<script type="text/javascript">
		$(document).ready(function() {

			$('#datatable').dataTable();

			$('.eBtn').click(function(e) {
				e.preventDefault();
				var href = $(this).attr('href');

				$.get(href, function(guest, status) {
					$('#id').val(guest.guestId).hide();
					$('#name').val(guest.guestName);
					$('#birth').val(guest.birth);
					$('#passport').val(guest.passport);
					$('#address').val(guest.address);
					$('#phone').val(guest.phoneNumber);
					$('#card').val(guest.idCard);
					$('#nationality').val(guest.nationality);
					if (guest.isVip === 'yes') {
						$('#checkVip').prop('checked', true);
					} else {
						$('#checkVip').prop('checked', false);
					}
				});

				$('#exampleModalCenter').modal();

			});

			$('input').click(function() {
				this.select();
			});

		});
	</script>
</body>
</html>